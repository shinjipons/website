---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";

// Social media links
const socialLinks = [
  { name: "Twitter", url: "https://twitter.com/shinjipons" },
  { name: "GitHub", url: "https://github.com/shinjipons" },
  { name: "LinkedIn", url: "https://linkedin.com/in/shinjipons" },
  { name: "Figma", url: "https://www.figma.com/@shinjipons" },
  { name: "Instagram", url: "https://www.instagram.com/shinji.pons" },
  { name: "Cal.com", url: "https://cal.com/shinjipons/" },
];

// Work experience
const workExperience = [
  {
    company: "Formlabs",
    role: "Product designer",
    period: "2025—",
  },
  {
    company: "Modyfi",
    role: "Product designer",
    period: "2024",
  },
  {
    company: "Ragdoll Dynamics",
    role: "Product designer",
    period: "2023—24",
  },
  {
    company: "Frostbite",
    role: "Product designer",
    period: "2022—23",
  },
  {
    company: "LEGO",
    role: "Product designer",
    period: "2019—21",
  },
  {
    company: "Autodesk",
    role: "Product designer",
    period: "2017—19",
  },
  {
    company: "Thomson Reuters",
    role: "Product designer",
    period: "2016—17",
  },
  {
    company: "Microsoft",
    role: "UX designer",
    period: "2015",
  },
  {
    company: "Barnbrook",
    role: "Intern",
    period: "2015",
  },
  {
    company: "Ateliers Jean Nouvel",
    role: "Intern",
    period: "2012",
  },
];

// Formal education
const education = [
  {
    institution: "London College of Communication",
    degree: "Bachelor of Arts, Graphic & Media Design",
    period: "2010—14",
  },
];

// Work projects (most proud projects)
const workProjects = [
  {
    name: "PreForm by Formlabs",
    description: "from version 3.51 onwards",
    url: "https://formlabs.com/software/preform/",
  },
  {
    name: "Ragdoll Standalone",
    description: "Animating with physics in Maya, Blender and beyond",
    url: "https://ragdolldynamics.com/",
  },
  {
    name: "Modyfi",
    description: "Confidential",
    url: "https://www.modyfi.com/",
  },
  {
    name: "Frostbite",
    description: "Confidential",
    url: "https://www.ea.com/frostbite",
  },
  {
    name: "LEGO Digital Designer Pro",
    description: "Confidential",
    url: "https://www.lego.com/",
  },
  {
    name: "Autodesk Alias SubD",
    description: "Designing subdivision modelling tools for Alias",
    url: "https://autodesk.com/alias",
  },
  {
    name: "Dynamo for Alias",
    description: "Adding computational design to Alias",
    url: "https://autodesk.com/alias",
  },
  {
    name: "Louvre Abu Dhabi",
    description: "Museum icon design and typography",
    url: "https://www.jeannouvel.com/projets/louvre-abou-dhabi-3/",
  },
];

// Side projects
const sideProjects = [
  {
    name: "Personal Tool",
    description:
      "A useful tool I built to solve a specific problem I encountered.",
    url: "https://github.com/example/personal-tool",
  },
];

// Next trips
const nextTrips = [
  // {
  //   title: "Ragdoll Con 2025",
  //   destination: "London, UK",
  //   date: "Nov 2025",
  // },
];

// Get all blog posts dynamically and sort by date (newest first)
const allPosts = await getCollection("writing");
const blogPosts = allPosts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime(),
);
---

<BaseLayout title="Home" description="Personal website and blog">
  <div class="max-w-[560px] mx-auto px-4 py-12">
    <!-- Header section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 px-4">
        Shinji Pons
      </h2>
      <p class="px-4 text-gray-700 dark:text-gray-300">Product Designer</p>
    </section>

    <!-- Today section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 px-4 pb-4">
        Today
      </h2>
      <p class="px-4 text-gray-700 dark:text-gray-300">
        I lead software product design at Formlabs. I craft 3D tools and
        workflows that incite artists, engineers and designers to accomplish
        greater things.
      </p>
    </section>

    <!-- Social Links Section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 px-4 pb-4">
        More
      </h2>
      <ul class="px-4">
        {
          socialLinks.map((link) => (
            <li>
              <a
                href={link.url}
                target="_blank"
                rel="noopener noreferrer"
                class="text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 inline-flex items-center gap-1"
              >
                {link.name}
                <span class="text-gray-500 dark:text-gray-500 text-xs">↗</span>
              </a>
            </li>
          ))
        }
      </ul>
    </section>

    <!-- Next Trip Section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 mb-6 px-4">
        Next trip
      </h2>
      {
        nextTrips.length > 0 ? (
          <div class="space-y-6">
            {nextTrips.map((trip) => (
              <div class="px-4 flex justify-between items-center">
                <p class="text-gray-900 dark:text-gray-100">
                  {trip.title ? (
                    <>
                      <span class="font-medium">{trip.title}</span>
                      {trip.destination && <> — {trip.destination}</>}
                    </>
                  ) : (
                    <span class="font-medium">{trip.destination}</span>
                  )}
                </p>
                {trip.date && (
                  <p class="text-gray-500 dark:text-gray-500 w-24 text-right">
                    {trip.date}
                  </p>
                )}
              </div>
            ))}
          </div>
        ) : (
          <p class="px-4 text-gray-700 dark:text-gray-300">
            Planning my next adventure...
          </p>
        )
      }
    </section>

    <!-- Blog Posts Section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 mb-6 px-4">
        Writing
      </h2>
      {
        blogPosts.length > 0 ? (
          <div class="space-y-2">
            {blogPosts.map((post) => (
              <a
                href={`/writing/${post.slug}`}
                class="block rounded-lg pt-4 px-4 pb-2 bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
              >
                <article>
                  <h3 class="font-medium text-gray-900 dark:text-gray-100 mb-2">
                    {post.data.title}
                  </h3>
                  <p class="text-gray-700 dark:text-gray-300 mb-2">
                    {post.data.description}
                  </p>
                </article>
              </a>
            ))}
          </div>
        ) : (
          <p class="text-gray-700 dark:text-gray-300">
            No posts yet. Check back soon!
          </p>
        )
      }
    </section>

    <!-- Work Experience Section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 mb-6 px-4">
        Experience
      </h2>
      <div class="space-y-6">
        {
          workExperience.map((job) => (
            <div class="px-4 flex justify-between items-center">
              <p class="text-gray-900 dark:text-gray-100">
                <span class="font-medium">{job.company}</span>
              </p>
              <div class="flex items-center gap-0">
                <p class="text-gray-700 dark:text-gray-300">{job.role}</p>
                <p class="text-gray-500 dark:text-gray-500 w-24 text-right">
                  {job.period}
                </p>
              </div>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Education Section -->
    <!-- <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 mb-6 px-4">
        Education
      </h2>
      <div class="space-y-6">
        {
          education.map((edu) => (
            <div class="px-4">
              <h3 class="font-medium text-gray-900 dark:text-gray-100">
                {edu.degree}
              </h3>
              <p class="text-gray-700 dark:text-gray-300 font-medium">
                {edu.institution}
              </p>
              <p class="text-gray-500 dark:text-gray-500">{edu.period}</p>
            </div>
          ))
        }
      </div>
    </section> -->

    <!-- Work Projects Section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 mb-6 px-4">
        Projects
      </h2>
      <div class="grid gap-2 grid-cols-1">
        {
          workProjects.map((project) => (
            <a
              href={project.url}
              target="_blank"
              rel="noopener noreferrer"
              class="block rounded-lg pt-4 px-4 pb-2 bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
            >
              <h3 class="font-medium text-gray-900 dark:text-gray-100 mb-2">
                {project.name}
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-2">
                {project.description}
              </p>
            </a>
          ))
        }
      </div>
    </section>

    <!-- Side Projects Section -->
    <section class="mb-16">
      <h2 class="font-semibold text-gray-900 dark:text-gray-100 mb-6 px-4">
        Side Projects
      </h2>
      <div class="grid gap-2 grid-cols-1">
        {
          sideProjects.map((project) => (
            <a
              href={project.url}
              target="_blank"
              rel="noopener noreferrer"
              class="block rounded-lg pt-4 px-4 pb-2 bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200"
            >
              <h3 class="font-medium text-gray-900 dark:text-gray-100 mb-2">
                {project.name}
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-2">
                {project.description}
              </p>
            </a>
          ))
        }
      </div>
    </section>
  </div>
</BaseLayout>
