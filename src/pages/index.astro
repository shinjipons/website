---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";

// Social media links
const socialLinks = [
  { name: "Twitter", url: "https://twitter.com/shinjipons" },
  { name: "GitHub", url: "https://github.com/shinjipons" },
  { name: "LinkedIn", url: "https://linkedin.com/in/shinjipons" },
  { name: "Figma", url: "https://www.figma.com/@shinjipons" },
  { name: "Instagram", url: "https://www.instagram.com/shinji.pons" },
  { name: "Cal.com", url: "https://cal.com/shinjipons/" },
];

// Work experience
const workExperience = [
  {
    company: "Formlabs",
    role: "Product designer",
    period: "2025—",
  },
  {
    company: "Modyfi",
    role: "Product designer",
    period: "2024",
  },
  {
    company: "Ragdoll Dynamics",
    role: "Product designer",
    period: "2023—24",
  },
  {
    company: "Frostbite",
    role: "Product designer",
    period: "2022—23",
  },
  {
    company: "LEGO",
    role: "Product designer",
    period: "2019—21",
  },
  {
    company: "Autodesk",
    role: "Product designer",
    period: "2017—19",
  },
  {
    company: "Thomson Reuters",
    role: "Product designer",
    period: "2016—17",
  },
  {
    company: "Microsoft",
    role: "UX designer",
    period: "2015",
  },
  {
    company: "Barnbrook",
    role: "Design intern",
    period: "2015",
  },
  {
    company: "Total Identity",
    role: "Design intern",
    period: "2013",
  },
  {
    company: "Ateliers Jean Nouvel",
    role: "Design intern",
    period: "2012",
  },
];

// Work projects (most proud projects)
const workProjects = [
  {
    name: "PreForm by Formlabs",
    description: "from version 3.51 onwards",
    url: "https://formlabs.com/software/preform/",
  },
  {
    name: "Ragdoll Standalone",
    description: "Animating with physics in Maya, Blender and beyond",
    url: "https://ragdolldynamics.com/",
  },
  {
    name: "Modyfi",
    description: "Confidential",
    url: "https://www.modyfi.com/",
  },
  {
    name: "Frostbite",
    description: "Confidential",
    url: "https://www.ea.com/frostbite",
  },
  {
    name: "LEGO Digital Designer Pro",
    description: "Confidential",
    url: "https://www.lego.com/",
  },
  {
    name: "Autodesk Alias SubD",
    description: "Designing subdivision modelling tools for Alias",
    url: "https://autodesk.com/alias",
  },
  {
    name: "Dynamo for Alias",
    description: "Adding computational design to Alias",
    url: "https://autodesk.com/alias",
  },
  {
    name: "Louvre Abu Dhabi",
    description: "Museum icon design and typography",
    url: "https://www.jeannouvel.com/projets/louvre-abou-dhabi-3/",
  },
];

// Side projects
const sideProjects = [
  {
    name: "Select Parent Component",
    description:
      "Figma plugin to grab the component wrapping the user selection",
    url: "https://github.com/shinjipons/Select-Parent-Component",
  },
  {
    name: "Time Lens",
    description: "Blender add-on for automating editor screenshots",
    url: "https://github.com/shinjipons/Time-Lens",
  },
  {
    name: "Modulo",
    description: "Family of 168 grid-based typefaces",
    url: "https://github.com/shinjipons/modulo-typeface",
  },
  {
    name: "InDesign Scripting",
    description: "Automating Adobe InDesign using basil.js",
    url: "https://github.com/shinjipons/basiljs-scripts",
  },
];

// Next trips
const nextTrips = [
  // {
  //   title: "Ragdoll Con 2025",
  //   destination: "London, UK",
  //   date: "Nov 2025",
  // },
];

// Get all blog posts dynamically and sort by date (newest first)
const allPosts = await getCollection("writing");
const blogPosts = allPosts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime(),
);

// Navigation sections
const navSections = [
  { id: "next-trip", label: "Next trip" },
  { id: "writing", label: "Writing" },
  { id: "experience", label: "Work Experience" },
  { id: "projects", label: "Projects" },
  { id: "side-projects", label: "Side Projects" },
];
---

<BaseLayout title="Home" description="Personal website and blog">
  <div class="max-w-[560px] mx-auto px-4 py-12">
    <!-- Header section -->
    <section class="pt-8 pb-4">
      <h2 class="font-semibold text-gray-900 dark:text-stone-100 px-4">
        Shinji Pons
      </h2>
      <p class="px-4 text-gray-700 dark:text-stone-300">Product Designer</p>
    </section>

    <!-- Today section -->
    <section class="pt-8 pb-4">
      <h2 class="font-semibold text-gray-900 dark:text-stone-100 px-4 pb-4">
        Today
      </h2>
      <p class="px-4 text-gray-700 dark:text-stone-300 mb-4">
        I work on software product design at <a href="https://formlabs.com/"
          >Formlabs</a
        >.
      </p>
      <p class="px-4 text-gray-700 dark:text-stone-300 mb-4">
        My ambition is to craft 3D tools and workflows that incite artists,
        engineers and designers to accomplish greater things.
      </p>
      <p class="px-4 text-gray-700 dark:text-stone-300 mb-4">
        You can reach out to me on{" "}
        <span
          set:html={socialLinks
            .map(
              (link, index) =>
                (index > 0
                  ? index === socialLinks.length - 1
                    ? " and "
                    : ", "
                  : "") +
                `<a href="${link.url}" target="_blank" rel="noopener noreferrer" class="text-gray-700 dark:text-stone-300">${link.name.trim()}</a>`,
            )
            .join("")}
        />.
      </p>
      <p class="px-4 text-gray-700 dark:text-stone-300">
        A few things to explore:
      </p>
      <ul class="px-4 mt-4 space-y-1 list-disc list-inside">
        {
          navSections.map((section) => (
            <li class="text-gray-400 dark:text-stone-400">
              <a
                href={`#${section.id}`}
                class="nav-link inline font-regular text-gray-700 dark:text-stone-300"
              >
                {section.label}
              </a>
            </li>
          ))
        }
      </ul>
    </section>

    <hr class="border-gray-400 dark:border-stone-600 my-8" />

    <!-- Next Trip Section -->
    <section id="next-trip" class="pt-8 pb-4">
      <h2 class="font-semibold text-gray-900 dark:text-stone-100 mb-6 px-4">
        Next trip
      </h2>
      {
        nextTrips.length > 0 ? (
          <div class="space-y-6">
            {nextTrips.map((trip) => (
              <div class="px-4 flex justify-between items-center">
                <p class="text-gray-900 dark:text-stone-100">
                  {trip.title ? (
                    <>
                      <span class="font-medium">{trip.title}</span>
                      {trip.destination && <> — {trip.destination}</>}
                    </>
                  ) : (
                    <span class="font-medium">{trip.destination}</span>
                  )}
                </p>
                {trip.date && (
                  <p class="text-gray-400 dark:text-stone-400 w-24 text-right">
                    {trip.date}
                  </p>
                )}
              </div>
            ))}
          </div>
        ) : (
          <p class="px-4 text-gray-700 dark:text-stone-300">
            Planning my next adventure...
          </p>
        )
      }
    </section>

    <hr class="border-gray-400 dark:border-stone-600 my-8" />

    <!-- Blog Posts Section -->
    <section id="writing" class="pt-8 pb-4">
      <h2 class="font-semibold text-gray-900 dark:text-stone-100 mb-6 px-4">
        Writing
      </h2>
      {
        blogPosts.length > 0 ? (
          <div class="space-y-2">
            {blogPosts.map((post) => (
              <a
                href={`/writing/${post.slug}`}
                class="block rounded-lg pt-4 px-4 pb-2 bg-white dark:bg-stone-900 hover:bg-gray-100 dark:hover:bg-stone-800 transition-colors duration-200"
              >
                <article>
                  <h3 class="font-medium text-gray-900 dark:text-stone-100 mb-2">
                    {post.data.title}
                  </h3>
                  <p class="text-gray-400 dark:text-stone-400 mb-2">
                    {post.data.description}
                  </p>
                </article>
              </a>
            ))}
          </div>
        ) : (
          <p class="px-4 text-gray-700 dark:text-stone-300">
            Still thinking... Check back soon.
          </p>
        )
      }
    </section>

    <hr class="border-gray-400 dark:border-stone-600 my-8" />

    <!-- Work Experience Section -->
    <section id="experience" class="pt-8 pb-4">
      <h2 class="font-semibold text-gray-900 dark:text-stone-100 mb-6 px-4">
        Work Experience
      </h2>
      <div class="space-y-6">
        {
          workExperience.map((job) => (
            <div class="px-4 flex justify-between items-center">
              <p class="text-gray-900 dark:text-stone-100">
                <span class="font-medium">{job.company}</span>
              </p>
              <div class="flex items-center gap-0">
                <p class="text-gray-700 dark:text-stone-300">{job.role}</p>
                <p class="text-gray-400 dark:text-stone-400 w-24 text-right">
                  {job.period}
                </p>
              </div>
            </div>
          ))
        }
      </div>
    </section>

    <hr class="border-gray-400 dark:border-stone-600 my-8" />

    <!-- Work Projects Section -->
    <section id="projects" class="pt-8 pb-4">
      <h2 class="font-semibold text-gray-900 dark:text-stone-100 mb-6 px-4">
        Projects
      </h2>
      <div class="grid gap-2 grid-cols-1">
        {
          workProjects.map((project) => (
            <a
              href={project.url}
              target="_blank"
              rel="noopener noreferrer"
              class="block rounded-lg pt-4 px-4 pb-2 bg-white dark:bg-stone-900 hover:bg-gray-100 dark:hover:bg-stone-800 transition-colors duration-200"
            >
              <h3 class="font-medium text-gray-900 dark:text-stone-100 mb-2">
                {project.name}
              </h3>
              <p class="text-gray-400 dark:text-stone-400 mb-2">
                {project.description}
              </p>
            </a>
          ))
        }
      </div>
    </section>

    <hr class="border-gray-400 dark:border-stone-600 my-8" />

    <!-- Side Projects Section -->
    <section id="side-projects" class="pt-8 pb-4">
      <h2 class="font-semibold text-gray-900 dark:text-stone-100 mb-6 px-4">
        Side Projects
      </h2>
      <div class="grid gap-2 grid-cols-1">
        {
          sideProjects.map((project) => (
            <a
              href={project.url}
              target="_blank"
              rel="noopener noreferrer"
              class="block rounded-lg pt-4 px-4 pb-2 bg-white dark:bg-stone-900 hover:bg-gray-100 dark:hover:bg-stone-800 transition-colors duration-200"
            >
              <h3 class="font-medium text-gray-900 dark:text-stone-100 mb-2">
                {project.name}
              </h3>
              <p class="text-gray-400 dark:text-stone-400 mb-2">
                {project.description}
              </p>
            </a>
          ))
        }
      </div>
    </section>
  </div>

  <!-- Experiments Section -->
  <!-- Add a section where I will have an Instagram-like feed of
  motion, Cursor and other shit visible for people to check out -->
  <!-- A good example: https://robb.is/#experiments -->
  <!-- One large, two small, repeat forever -->
</BaseLayout>
