@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom Easing Functions */
:root {
  /* ease-in */
  --ease-in-quad: cubic-bezier(.55, .085, .68, .53);
  --ease-in-cubic: cubic-bezier(.550, .055, .675, .19);
  --ease-in-quart: cubic-bezier(.895, .03, .685, .22);
  --ease-in-quint: cubic-bezier(.755, .05, .855, .06);
  --ease-in-expo: cubic-bezier(.95, .05, .795, .035);
  --ease-in-circ: cubic-bezier(.6, .04, .98, .335);

  /* ease-out */
  --ease-out-quad: cubic-bezier(.25, .46, .45, .94);
  --ease-out-cubic: cubic-bezier(.215, .61, .355, 1);
  --ease-out-quart: cubic-bezier(.165, .84, .44, 1);
  --ease-out-quint: cubic-bezier(.23, 1, .32, 1);
  --ease-out-expo: cubic-bezier(.19, 1, .22, 1);
  --ease-out-circ: cubic-bezier(.075, .82, .165, 1);

  /* ease-in-out */
  --ease-in-out-quad: cubic-bezier(.455, .03, .515, .955);
  --ease-in-out-cubic: cubic-bezier(.645, .045, .355, 1);
  --ease-in-out-quart: cubic-bezier(.77, 0, .175, 1);
  --ease-in-out-quint: cubic-bezier(.86, 0, .07, 1);
  --ease-in-out-expo: cubic-bezier(1, 0, 0, 1);
  --ease-in-out-circ: cubic-bezier(.785, .135, .15, .86);
}


@layer base {
  html {
    font-size: 14px;
  }

  body {
    font-size: 1rem;
    font-family: "Inter", sans-serif;
    line-height: 1.65;
  }

  h1, h2, h3, h4, h5, h6, p, span, a, li, ul, ol, div, article, section {
    font-size: 1rem;
    font-family: "Inter", sans-serif;
    line-height: 1.65;
  }

  /* Ensure code blocks and all their children use monospace */
  pre, code, pre *, code *, pre span, code span {
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace !important;
  }

  /* Inline code styling in dark mode */
  .dark .prose code:not(pre code),
  .dark article code:not(pre code),
  .dark p code:not(pre code) {
    color: rgb(248 113 113) !important; /* red-400 */
    background-color: rgb(10 10 10) !important; /* neutral-950 */
  }

  @media (prefers-color-scheme: dark) {
    .prose code:not(pre code),
    article code:not(pre code),
    p code:not(pre code) {
      color: rgb(248 113 113) !important; /* red-400 */
      background-color: rgb(10 10 10) !important; /* neutral-950 */
    }
  }

  /* Links in text content - no underline by default */
  .prose a:not(.block):not([class*="rounded-lg"]),
  article p a:not(.block):not([class*="rounded-lg"]),
  p a:not(.block):not([class*="rounded-lg"]) {
    text-decoration: none;
  }

  /* Hover transitions only on devices with precise pointing */
  @media (hover: hover) and (pointer: fine) {
    .prose a:not(.block):not([class*="rounded-lg"]),
    article p a:not(.block):not([class*="rounded-lg"]),
    p a:not(.block):not([class*="rounded-lg"]) {
      transition: color 0.2s ease, text-decoration-style 0.2s ease;
    }

    /* Hover effect for links in light mode */
    .prose a:not(.block):not([class*="rounded-lg"]):hover,
    article p a:not(.block):not([class*="rounded-lg"]):hover,
    p a:not(.block):not([class*="rounded-lg"]):hover {
      color: rgb(250 250 250); /* neutral-50 */
      text-decoration: underline;
      text-decoration-style: solid;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.2em;
    }

    /* Hover effect for links in dark mode */
    .dark .prose a:not(.block):not([class*="rounded-lg"]):hover,
    .dark article p a:not(.block):not([class*="rounded-lg"]):hover,
    .dark p a:not(.block):not([class*="rounded-lg"]):hover {
      color: rgb(250 250 250); /* neutral-50 */
      text-decoration: underline;
      text-decoration-style: solid;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.2em;
    }
  }

  @media (prefers-color-scheme: light) and (hover: hover) and (pointer: fine) {
    .prose a:not(.block):not([class*="rounded-lg"]):hover,
    article p a:not(.block):not([class*="rounded-lg"]):hover,
    p a:not(.block):not([class*="rounded-lg"]):hover {
      color: rgb(250 250 250); /* neutral-50 */
      text-decoration: underline;
      text-decoration-style: solid;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.2em;
    }
  }

  @media (prefers-color-scheme: dark) and (hover: hover) and (pointer: fine) {
    .prose a:not(.block):not([class*="rounded-lg"]):hover,
    article p a:not(.block):not([class*="rounded-lg"]):hover,
    p a:not(.block):not([class*="rounded-lg"]):hover {
      color: rgb(250 250 250); /* neutral-50 */
      text-decoration: underline;
      text-decoration-style: solid;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.2em;
    }
  }

  /* Remove trailing whitespace from links */
  p a {
    white-space: nowrap;
  }

  /* Card links and navigation links should not have underline */
  a.block,
  a[class*="rounded-lg"],
  a.inline-flex,
  a[class*="hover:underline"] {
    text-decoration: none !important;
  }

  /* Navigation links in "A few things to explore" list - no underline by default */
  .nav-link {
    text-decoration: none;
  }

  /* Hover transitions only on devices with precise pointing */
  @media (hover: hover) and (pointer: fine) {
    .nav-link {
      transition: color 0.2s ease, text-decoration-style 0.2s ease;
    }

    /* Hover effect for nav links in light mode */
    .nav-link:hover {
      color: rgb(250 250 250); /* neutral-50 */
      text-decoration: underline;
      text-decoration-style: solid;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.2em;
    }

    /* Hover effect for nav links in dark mode */
    .dark .nav-link:hover {
      color: rgb(250 250 250); /* neutral-50 */
      text-decoration: underline;
      text-decoration-style: solid;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.2em;
    }
  }

  @media (prefers-color-scheme: dark) and (hover: hover) and (pointer: fine) {
    .nav-link:hover {
      color: rgb(250 250 250); /* neutral-50 */
      text-decoration: underline;
      text-decoration-style: solid;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.2em;
    }
  }

  /* Horizontal rules are solid */
  hr {
    border-style: solid;
    border-width: 0 0 1px 0;
  }

  /* Blockquotes use secondary text color and have left border */
  .prose blockquote,
  article blockquote,
  blockquote {
    color: rgb(120 113 108) !important; /* stone-500 */
    border-left: 2px solid rgb(120 113 108); /* stone-500 */
    box-sizing: border-box;
    padding-left: calc(1rem - 2px) !important; /* Adjust padding to account for border */
  }

  .dark .prose blockquote,
  .dark article blockquote,
  .dark blockquote {
    color: rgb(163 163 163) !important; /* neutral-400 */
    border-left-color: rgb(163 163 163); /* neutral-400 */
  }

  @media (prefers-color-scheme: dark) {
    .prose blockquote,
    article blockquote,
    blockquote {
      color: rgb(163 163 163) !important; /* neutral-400 */
      border-left-color: rgb(163 163 163); /* neutral-400 */
    }
  }

  /* Images in dark mode get dark background for transparent PNGs and border radius */
  .prose img,
  article img,
  img {
    border-radius: 6px;
  }

  /* Blog images take full width while maintaining aspect ratio */
  .prose img,
  article img {
    width: 100%;
    height: auto;
  }

  .dark .prose img,
  .dark article img,
  .dark img {
    background-color: rgb(10 10 10); /* neutral-950 */
  }

  @media (prefers-color-scheme: dark) {
    .prose img,
    article img,
    img {
      background-color: rgb(10 10 10); /* neutral-950 */
    }
  }

  /* Video styling */
  .prose video,
  article video,
  video {
    border-radius: 6px;
    width: 100%;
    height: auto;
    display: block;
  }

  /* Hide video controls by default, show on hover (WebKit browsers) */
  @media (hover: hover) and (pointer: fine) {
    .prose video::-webkit-media-controls-panel,
    article video::-webkit-media-controls-panel,
    video::-webkit-media-controls-panel {
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .prose video:hover::-webkit-media-controls-panel,
    article video:hover::-webkit-media-controls-panel,
    video:hover::-webkit-media-controls-panel {
      opacity: 1;
    }

    /* For other WebKit pseudo-elements */
    .prose video:not(:hover)::-webkit-media-controls,
    article video:not(:hover)::-webkit-media-controls,
    video:not(:hover)::-webkit-media-controls {
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .prose video:hover::-webkit-media-controls,
    article video:hover::-webkit-media-controls,
    video:hover::-webkit-media-controls {
      opacity: 1;
    }
  }
}

/* Reusable transition classes for hover effects */
@layer components {
  /* Apply transitions only on devices with precise pointing */
  @media (hover: hover) and (pointer: fine) {
    /* Color transition for text links (events, work experience) */
    .transition-color-hover {
      transition: color 0.2s ease;
    }

    /* Background color transition for cards (blog posts, projects) */
    .transition-bg-hover {
      transition: background-color 0.2s ease;
    }

    /* Combined color and background transitions */
    .transition-colors-hover {
      transition: color 0.2s ease, background-color 0.2s ease;
    }
  }

  /* Disable transitions for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .transition-color-hover,
    .transition-bg-hover,
    .transition-colors-hover,
    .prose a:not(.block):not([class*="rounded-lg"]),
    article p a:not(.block):not([class*="rounded-lg"]),
    p a:not(.block):not([class*="rounded-lg"]),
    .nav-link {
      transition: none !important;
    }
  }
}

/* Fade-in animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@layer utilities {
  .fade-in {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
  }

  .fade-in-delay-1 {
    animation-delay: 0.1s;
  }

  .fade-in-delay-2 {
    animation-delay: 0.2s;
  }

  .fade-in-delay-3 {
    animation-delay: 0.3s;
  }

  .fade-in-delay-4 {
    animation-delay: 0.4s;
  }

  .fade-in-delay-5 {
    animation-delay: 0.5s;
  }

  .fade-in-delay-6 {
    animation-delay: 0.6s;
  }

  /* Disable animations for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .fade-in,
    .fade-in-delay-1,
    .fade-in-delay-2,
    .fade-in-delay-3,
    .fade-in-delay-4,
    .fade-in-delay-5,
    .fade-in-delay-6 {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
  }
}

